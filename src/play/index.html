<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" media="screen" href="https://around.createx.studio/assets/css/theme.min.css">
<meta charset="UTF-8">
<title>Stereo Separation & Reverb Tool</title>
</head>
<body class="container pt-5 mt-5">
<input type="file" id="audioFileInput">
<label for="panSlider">Pan:</label>
<input type="range" id="panSlider" min="0" max="100" value="50">
<label for="reverbSlider">Reverb:</label>

    
    <input class="" type="range" id="reverbSlider" min="0" max="100" value="0">


<audio id="audioPlayer" controls></audio>

<script>
const audioContext = new (window.AudioContext || window.webkitAudioContext)();
const audioPlayer = document.getElementById('audioPlayer');
const audioFileInput = document.getElementById('audioFileInput');
const panSlider = document.getElementById('panSlider');
const reverbSlider = document.getElementById('reverbSlider');

// Impulse response for reverb effect (you can replace this with your own impulse response)
const impulseResponseURL = 'WIDE HALL-1.wav';

audioFileInput.addEventListener('change', async function() {
  const file = audioFileInput.files[0];
  const fileBuffer = await file.arrayBuffer();
  
  audioContext.decodeAudioData(fileBuffer, function(buffer) {
    const source = audioContext.createBufferSource();
    source.buffer = buffer;
    
    const splitter = audioContext.createChannelSplitter(2);
    const merger = audioContext.createChannelMerger(2);
    
    source.connect(splitter);
    
    const leftGain = audioContext.createGain();
    const rightGain = audioContext.createGain();
    
    splitter.connect(leftGain, 0);
    splitter.connect(rightGain, 1);
    
    const leftOutput = audioContext.createChannelMerger(2);
    const rightOutput = audioContext.createChannelMerger(2);
    
    leftGain.connect(leftOutput, 0, 0);
    rightGain.connect(rightOutput, 0, 1);
    
    const reverb = audioContext.createConvolver();
    const reverbGain = audioContext.createGain();
    
    fetch(impulseResponseURL)
      .then(response => response.arrayBuffer())
      .then(buffer => audioContext.decodeAudioData(buffer))
      .then(impulseResponse => {
        reverb.buffer = impulseResponse;
      });
    
    source.connect(reverb);
    reverb.connect(reverbGain);
    reverbGain.connect(merger);
    
    leftOutput.connect(merger, 0, 0);
    rightOutput.connect(merger, 0, 1);
    
    merger.connect(audioContext.destination);
    
    source.start();
    
    panSlider.addEventListener('input', function() {
      const panValue = parseFloat(panSlider.value) / 100;
      leftGain.gain.value = 1 - panValue;
      rightGain.gain.value = panValue;
    });
    
    reverbSlider.addEventListener('input', function() {
      const reverbValue = parseFloat(reverbSlider.value) / 100;
      reverbGain.gain.value = reverbValue;
    });
  });
});

</script>
</body>
</html>
